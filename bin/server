#!/usr/bin/env ruby


Dir.chdir File.expand_path('..', __dir__)


# To handle Ctrl-C expected
trap :INT do
  reg = %r{\d+\s+(\d+).+tcp://(127.0.0.1|localhost):300\d}
  pid = `ps -ef | grep puma`[reg, 1]
  Process.kill :TERM, pid.to_i
  exit
end


system 'bundle exec nanoc live'
